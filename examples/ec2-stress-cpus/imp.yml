description: "This experiment stresses a custom number of CPUs."
targets:
  - name: "ec2-instances"
    resource_type: "aws:ec2:instance"
    resource_tags:
      - key: "imp"
        value: "ec2-experiment"
    selection_mode: "ALL"
actions:
  - name: "stress-cpus"
    type: "imp:run-script"
    path: "scripts/stress-cpu.sh"
    target: "ec2-instances"
    duration: "PT15M"
    parameters:
      - key: "InstallDependencies"
        value: "True"
      - key: "Duration"
        value: "20"
      - key: "CPU"
        value: "0"