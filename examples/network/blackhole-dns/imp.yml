Description: "This experiment disables and re-enables port 53 to simulate a DNS outage."
Targets:
  - Name: "ec2-instances"
    ResourceType: "aws:ec2:instance"
    ResourceTags:
      - Key: "imp"
        Value: "ec2-experiment"
    SelectionMode: "ALL"
actions:
  - name: "disable-dns"
    type: "imp:run-script"
    path: "disable-dns.sh"
    target: "ec2-instances"
    duration: "PT1M"
    parameters:
      - key: "Duration"
        value: "30"
  - name: "enable-dns"
    start_after:
      - "disable-dns"
    type: "imp:run-script"
    path: "enable-dns.sh"
    target: "ec2-instances"
    duration: "PT1M"