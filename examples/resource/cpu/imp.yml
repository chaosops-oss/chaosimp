Description: "This experiment stresses a custom number of CPUs."
Targets:
  - Name: "ec2-instances"
    ResourceType: "aws:ec2:instance"
    ResourceTags:
      - Key: "imp"
        Value: "ec2-experiment"
    SelectionMode: "ALL"
actions:
  - name: "install"
    type: "imp:run-script"
    path: "../../install-stress-ng.sh"
    target: "ec2-instances"
    duration: "PT1M"
  - name: "stress-cpus"
    start_after:
      - "install"
    type: "imp:run-script"
    path: "stress-cpu.sh"
    target: "ec2-instances"
    duration: "PT1M"
    parameters:
      - key: "Duration"
        value: "20"
      - key: "Load"
        value: "100"