description: "This experiment disables and re-enables port 53 to simulate a DNS outage."
targets:
  - name: "ec2-instances"
    resource_type: "aws:ec2:instance"
    resource_tags:
      - key: "imp"
        value: "ec2-experiment"
    selection_mode: "ALL"
actions:
  - name: "disable-dns"
    type: "imp:run-script"
    path: "scripts/disable-dns.sh"
    target: "ec2-instances"
    duration: "PT10M"
  - name: "enable-dns"
    start_after:
      - "disable-dns"
    type: "imp:run-script"
    path: "scripts/enable-dns.sh"
    target: "ec2-instances"
    duration: "PT10M"
    parameters:
      - key: "Duration"
        value: "1"